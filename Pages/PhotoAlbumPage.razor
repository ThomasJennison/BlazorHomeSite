@page "/photoAlbum/{albumId}"
@using BlazorHomeSite.Data
@using Microsoft.EntityFrameworkCore

@inject IDbContextFactory<ApplicationDbContext> DbFactory
@inject ISnackbar Snackbar

<MudContainer Class="mt-2 px-8" MaxWidth="MaxWidth.Large">
    <MudPaper Elevation="5" Outlined="true">
        <MudStack>

            <MudPaper Elevation="5" Style="margin: 5px">
                <MudContainer Class="mt-2 px-8" Style="align-content: center; justify-content: center;" MaxWidth="MaxWidth.Medium">
                    <MudText Typo="Typo.h6">@albumDescription</MudText>
                </MudContainer>
            </MudPaper>

            <MudPaper Elevation="10" Style="margin: 5px">
                <MudContainer MaxWidth="MaxWidth.Large">
                    @if (allPhotos != null)
                    {
                        <MudGrid Style="margin: 10px" Spacing="1">

                            @foreach (var photo in allPhotos.Skip(currentPage == 1 ? 0 : currentPage * PhotosPerPage).Take(PhotosPerPage))
                            {
                                <MudItem sm="2">
                                    <MudNavLink Style="" Href=@GetPhotoNavigaitonParams(photo.Id)>
                                        <MudImage ObjectFit="ObjectFit.Contain"
                                                  Fluid="false"
                                                  Height="50"
                                                  Width="50"
                                                  Elevation="25" Class="rounded-sm"
                                                  Src=@photo.ThumbnailPath>
                                        </MudImage>
                                    </MudNavLink>
                                </MudItem>
                            }

                        </MudGrid>
                    }

                </MudContainer>
            </MudPaper>

            <MudDivider DividerType="DividerType.FullWidth" Class="my-2"/>

            <MudPaper Elevation="15" Style="margin-top: -10px">
                <MudPagination Variant="Variant.Filled"
                               Color="Color.Tertiary"
                               ShowFirstButton="true" ShowLastButton="true"
                               Style="margin: 10px; width: 100%; align-content: center; justify-content: center"
                               Count="@numberOfPages" @bind-Selected="@currentPage"/>
            </MudPaper>

        </MudStack>
    </MudPaper>
</MudContainer>